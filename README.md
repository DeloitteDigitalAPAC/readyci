# Ready CI
A no-fuss CI/CD service and collection of build scripts

## Why use Ready CI?

### It comes with scripts
Ready CI comes with build scripts so that you spend less time setting up your automated CI/CD infrastructure, and get to making automated builds faster. Ready CI scripts currently support:
* iOS apps

### Command-line or web-service
You can run Ready CI on the command-line within another CI environment like Jenkins, or run Ready CI as a service on it's own and accept web-hook calls from GIT services.

### Supports GIT web-hooks
Ready CI supports GIT commit web-hooks when you run it as a service so that your automated builds start as soon as you push to your git repository.

### Parses iOS provisioning profiles
Configuring iOS builds is tricky. Ready CI uses the .mobileprovision file generated by Apple Developer Portal to automatically configure your build and remove some of the guess-work behind making your iOS app build successful.

### Handles whitespace
Paths, filenames and target names look great when you use whitespace. However, whitespace can be a nightmare to manage in CI scripts so Ready CI handles whitespace like a pro* so that your builds keep working while your project files are clean and readable.

\* The `pipeline` command-line parameter doesn't handle whitespace well. A work in process :-)

## How to use Ready CI
### Building Ready CI
Maven will create target/readyci-0.1.jar
```
mvn install
```

### Configure pipelines
Make your own copy of the readyConfigExample.yml file, specifying all of your pipelines and associated build tasks.

### Running a command-line build
Run a once off command-line build by specifying a `yml` configuration file and the `pipeline=` parameter.
```
java -jar target/readyci-0.1.jar readyConfigExample.yml pipeline=first-build-name
11:26:36.763 [main] INFO com.squarepolka.readyci.configuration.ReadyCIConfiguration - Loaded configuration readyConfigExample.yml with 2 pipelines
...
2018-06-13 11:26:41.768  INFO 44260 --- [           main] com.squarepolka.readyci.ReadyCI          : Ready CI is in command-line mode
2018-06-13 11:26:41.768  INFO 44260 --- [           main] com.squarepolka.readyci.ReadyCI          : Building pipline first-build-name

```

### Running a build service
Ready CI can run as a web-service and listen out for web-hook calls. Ready CI currently supports web-hook calls from Bitbucket. Configure Bitbucket to post to http://<your address>:8080/webhook and then run Ready CI with a `yml` configuration time and the `server` parameter. GitHub web-hooks will be supported soon.
```
java -jar target/readyci-0.1.jar readyConfigExample.yml server
11:26:36.763 [main] INFO com.squarepolka.readyci.configuration.ReadyCIConfiguration - Loaded configuration readyConfigExample.yml with 2 pipelines
...
2018-06-13 11:36:01.756  INFO 44416 --- [           main] com.squarepolka.readyci.ReadyCI          : Ready CI is in server mode
2018-06-13 11:36:01.758  INFO 44416 --- [           main] com.squarepolka.readyci.ReadyCI          : Started ReadyCI in 3.655 seconds (JVM running for 4.612)
```

You can test your web-hook using cURL
```
curl -X POST \
  http://localhost:8080/webhook \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \
  -d '{
   "push":{
      "changes":[
         {
            "new":{
               "type":"branch",
               "name":"master",
               "target":{
                  "author":{
                     "raw":"Bradley Clayton <me@cheese.toast.com>"
                  }
               }
            }
         }
      ]
   },
   "repository":{
      "name":"first-build-name"
   }
}'
```
 